<!DOCTYPE html>
<html>
<head>
  <title>Products - Shop <%= shopId %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <%- include('partials/header') %>

  <div class="container py-3">
  <h1 class="mb-4" style="
    color: #000;
    text-align: center;
    font-weight: 500;
    font-size: 1.8rem;
    padding-bottom: 10px;
    border-bottom: 1px solid #e0e0e0;
    position: relative;
  ">
    PRODUCTS IN SHOP <%= shopId %>
    <div style="
      position: absolute;
      bottom: -1px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 2px;
      background: #000;
    "></div>
  </h1>

  <% if (!products || products.length === 0) { %>
    <div class="text-center py-4">
      <p style="font-size: 0.95rem; color: #777; letter-spacing: 0.5px;">No products available in this shop</p>
    </div>
  <% } else { %>
    <div class="row g-3">
      <% products.forEach(product => { %>
        <div class="col-md-4">
          <div class="card h-100" style="
            border: none;
            border-radius: 2px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            overflow: hidden;
          " onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.1)'" 
             onmouseout="this.style.transform=''; this.style.boxShadow='0 2px 10px rgba(0,0,0,0.05)'">
            
            <% if (product.image_path) { %>
              <img 
                src="/<%= product.image_path.replace(/\\/g, '/') %>" 
                class="card-img-top" 
                alt="<%= product.name %>" 
                style="
                  height: 160px; 
                  object-fit: cover;
                  transition: transform 0.3s ease;
                "
                onmouseover="this.style.transform='scale(1.03)'"
                onmouseout="this.style.transform='scale(1)'">
            <% } else { %>
              <div style="
                height: 160px; 
                background: linear-gradient(45deg, #f5f5f5, #fafafa);
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
              ">
                <span style="color: #ccc; font-size: 0.8rem; letter-spacing: 1px;">IMAGE UNAVAILABLE</span>
                <div style="
                  position: absolute;
                  top: 0;
                  left: 0;
                  right: 0;
                  height: 1px;
                  background: linear-gradient(90deg, transparent, #e0e0e0, transparent);
                "></div>
              </div>
            <% } %>
            
            <div class="card-body" style="padding: 1.2rem;">
              <h5 class="card-title" style="
                color: #000;
                font-weight: 600;
                margin-bottom: 8px;
                font-size: 1.1rem;
                letter-spacing: 0.3px;
                position: relative;
                display: inline-block;
              ">
                <%= product.name %>
                <div style="
                  position: absolute;
                  bottom: -4px;
                  left: 0;
                  width: 30px;
                  height: 1px;
                  background: #000;
                "></div>
              </h5>
              
              <p class="card-text" style="
                color: #666;
                line-height: 1.45;
                font-size: 0.85rem;
                margin-bottom: 12px;
                min-height: 40px;
              ">
                <%= product.description %>
              </p>
              
              <div class="d-flex justify-content-between align-items-center" style="
                padding-top: 8px;
                border-top: 1px dashed #eaeaea;
              ">
                <span style="
                  font-size: 1rem; 
                  color: #000; 
                  font-weight: 600;
                  letter-spacing: 0.5px;
                ">
                  Nu. <%= product.price %>
                </span>
                <a 
                  href="/products/<%= product.id %>/buy" 
                  class="btn" 
                  style="
                    background: transparent;
                    border: 1px solid #000;
                    border-radius: 0;
                    color: #000;
                    padding: 4px 16px;
                    font-size: 0.8rem;
                    transition: all 0.2s;
                    position: relative;
                    overflow: hidden;
                    z-index: 1;
                  "
                  onmouseover="this.style.color='#fff'"
                  onmouseout="this.style.color='#000'"
                >
                  <span style="position: relative; z-index: 2">BUY</span>
                  <div style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 0;
                    height: 100%;
                    background: #000;
                    transition: width 0.3s ease;
                    z-index: 1;
                  " onmouseover="this.style.width='100%'" onmouseout="this.style.width='0'"></div>
                </a>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>

  <%- include('partials/footer') %>
</body>
</html>